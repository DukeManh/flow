<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./assets/images/favicon.ico" type="image/ico">
  <title>Flow</title>
  
  <!-- Modular CSS files -->
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/layout.css">
  <link rel="stylesheet" href="./css/header.css">
  <link rel="stylesheet" href="./css/timer.css">
  <link rel="stylesheet" href="./css/goals.css">
  <link rel="stylesheet" href="./css/todos.css">
  <link rel="stylesheet" href="./css/music.css">
  <link rel="stylesheet" href="./css/history.css">
  <link rel="stylesheet" href="./css/responsive.css">
</head>

<body>
  <div class="header">
    <h1 style="display: flex; align-items: center; font-family: 'Courier New', Courier, monospace; font-size: 2em; font-weight:800; letter-spacing: 0.05em;">
      <span style="font-style: italic">Flow</span>
    </h1>
    <div id="datetime"></div>
    <div class="header-controls">
      <!-- Custom theme dropdown -->
      <div class="theme-dropdown">
        <button id="themeDropdownBtn" class="theme-dropdown-btn" title="Change Theme">
          <span class="current-theme-icon">ğŸ¨</span>
        </button>
        <div class="theme-dropdown-content">
          <div class="theme-option" data-theme="default">Light</div>
          <div class="theme-option" data-theme="dark">Dark</div>
          <div class="theme-option" data-theme="nature">Nature</div>
          <div class="theme-option" data-theme="ocean">Ocean</div>
          <div class="theme-option" data-theme="sunset">Sunset</div>
          <div class="theme-option" data-theme="midnight">Midnight</div>
          <div class="theme-option" data-theme="mint">Mint</div>
        </div>
      </div>
      <button id="distractionToggle" title="Toggle Distraction-Free">ğŸš«</button>
    </div>
  </div>
  <div class="container">
    <div class="card" id="timerCard">
      <h2>â±ï¸ 52/17 Rule<span class="tooltip"
          title="Engage in 52 minutes of uninterrupted focus followed by a 17-minute restorative break">â„¹ï¸</span>
      </h2>
      <div class="progress-bar">
        <div class="progress" id="progress"></div>
      </div>
      <div id="timerLabel">Focus Time</div>
      <div id="timer">52:00</div>
      <div class="controls">
        <button id="startBtn">Lock In</button>
        <button id="pauseBtn">Pause</button>
        <button id="endBtn">End</button>
        <button id="resetBtn">Reset</button>
      </div>
      <p class="note">ğŸ¯ Focus on one task at a time.</p>
      <p class="note">â³ Set clear, bite-sized goals.</p>

      <div id="soundSettings">
        <h3>Sound Notifications</h3>
        <div class="sound-controls">
          <input type="checkbox" id="soundToggle" checked>
          <label for="soundToggle">Enable sound notifications</label>
        </div>
      </div>
    </div>
    <div class="card" id="goalCard">
      <h2>ğŸ¯ What is your goal today?</h2>
      <div id="goalContainer"></div>
    </div>
    <div class="card" id="todoCard">
      <h2>ğŸ“ Tasks</h2>
      <div class="todo-input">
        <input type="text" id="todoInput" placeholder="Add a taskâ€¦">
        <button id="addTodoBtn">Add</button>
      </div>
      <ul id="todoList"></ul>
    </div>
    <div class="card" id="insightsCard">
      <h2>ğŸ“Š Productivity Insights</h2>
      <div class="chart-title">Focus Time - Last 7 Days</div>
      <div id="chartContainer"></div>
    </div>
    <div class="card" id="musicCard">
      <h2>ğŸ¶ Tunes</h2>
      <iframe id="ytPlayer" src="https://www.youtube.com/embed/wL8DVHuWI7Y?autoplay=1&loop=1&playlist=wL8DVHuWI7Y"
        allow="autoplay; encrypted-media"></iframe>
      <div class="controls">
        <button id="vBtn">VÃ˜J, Narvent</button>
        <button id="bBtn">Binaural Beats</button>
        <button id="lBtn">Lofi</button>
        <input type="text" id="customVidInput" placeholder="YouTube IDâ€¦">
        <button id="loadBtn">Load</button>
      </div>
    </div>
    <div class="card" id="historyCard">
      <h2>ğŸ“œ Session History</h2>
      <ul id="historyList"></ul>
    </div>
  </div>

  <!-- Audio elements -->
  <audio id="startSound" src="./assets/sounds/button.wav"></audio>
  <audio id="endSound" src="./assets/sounds/alarm-bell.wav"></audio>
  <audio id="pauseSound" src="./assets/sounds/button.wav"></audio>

  <!-- Global utilities -->
  <script src="./js/global.js"></script>
  
  <!-- Main application (using ES modules) -->
  <script type="module" src="./js/app.js"></script>
</body>

</html>
